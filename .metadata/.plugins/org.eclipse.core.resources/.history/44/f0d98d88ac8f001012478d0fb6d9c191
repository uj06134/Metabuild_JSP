<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	request.setCharacterEncoding("UTF-8");
%>
<!-- MovieBean 객체 생성 -->
<jsp:useBean id="mb" class="myPkg.MovieBean"/>
<jsp:setProperty property="*" name="mb"/>

<%
	// genre(다수) 넣는법
	String[] genre = request.getParameterValues("genre");
	String str = "";
	if (genre == null){
		out.println("널입니다.");
		temp="선택사항없음"; // 이 줄 없으면 수정 form에서 선택해놓은 취미가 없을 때 에러가 나므로(null과 비교하므로) 이 줄 넣어준다.
							// 아니면 위의 String temp=" " 이렇게 스페이스 하나 temp에 넣어주면 temp="선택사항없음" 넣어주지 않아도 된다.
	}
	else {
		//out.println("선택한 항목의 갯수 : " + hobby.length);
		//out.println("<br>");
	for(int i=0; i<genre.length; i+=1){
		str += genre[i] + " ";
	}
	mb.setGenre(str);
%>

<!-- MovieDao 객체 생성 -->
<jsp:useBean id="mdao" class="myPkg.MovieDao"/>

<%
	int cnt = mdao.insertMovie(mb);
	if (cnt != -1){
		response.sendRedirect("select.jsp");
	}else {
		response.sendRedirect("insertForm.jsp");
	}
%>